DSKINV      = $E453
CIOV        = $E456
SIOV        = $E459
SETVBV      = $E45C
SYSVBV      = $E45F
XITVBV      = $E462
SIOINV      = $E465
SENDEV      = $E468
INTINV      = $E46B
CIOINV      = $E46E
SELFSV      = $E471
WARMSV      = $E474
COLDSV      = $E477
RBLOKV      = $E47A
CSOPIV      = $E47D
PUPDIV      = $E480
SELFTSV     = $E483
PENTV       = $E486
PHUNLV      = $E489
PHINIV      = $E48C
GPDVV       = $E48F
;
; Code equates
;
L0082       = $0082
L0087       = $0087
L0088       = $0088
L008A       = $008A
L008D       = $008D
L009C       = $009C
L009D       = $009D
L009E       = $009E
L009F       = $009F
L00A0       = $00A0
L00A1       = $00A1
L00A2       = $00A2
L00A3       = $00A3
L00A4       = $00A4
L00A5       = $00A5
L00A6       = $00A6
L00A7       = $00A7
L00A8       = $00A8
L00A9       = $00A9
L00AA       = $00AA
L00AB       = $00AB
L00AC       = $00AC
L00AD       = $00AD
L00AE       = $00AE
L00AF       = $00AF
L00B0       = $00B0
L00B1       = $00B1
L00B2       = $00B2
L00B3       = $00B3
L00B4       = $00B4
L00B5       = $00B5
L00B6       = $00B6
L00B7       = $00B7
L00B8       = $00B8
L00B9       = $00B9
L00BA       = $00BA
L00BB       = $00BB
L00BC       = $00BC
L00BD       = $00BD
L00BE       = $00BE
L00BF       = $00BF
L00C0       = $00C0
L00C1       = $00C1
L00C2       = $00C2
L00C3       = $00C3
L00C4       = $00C4
L00C5       = $00C5
L00C6       = $00C6
L00C7       = $00C7
L00C8       = $00C8
L00C9       = $00C9
L00CA       = $00CA
L00CB       = $00CB
L00CC       = $00CC
L00CD       = $00CD
L00CE       = $00CE
L00CF       = $00CF
L00D0       = $00D0
L00D1       = $00D1
L00D2       = $00D2
L00D3       = $00D3
L00D4       = $00D4
L00D5       = $00D5
L00D6       = $00D6
L00D7       = $00D7
L00D8       = $00D8
L00D9       = $00D9
L00DA       = $00DA
L00DB       = $00DB
L00DC       = $00DC
L00DD       = $00DD
L00DE       = $00DE
L00DF       = $00DF
L00E0       = $00E0
L00E1       = $00E1
L00E2       = $00E2
L00E3       = $00E3
L00E4       = $00E4
L00E5       = $00E5
L00E6       = $00E6
L00E7       = $00E7
L00E8       = $00E8
L00E9       = $00E9
L00EA       = $00EA
L00EB       = $00EB
L00EC       = $00EC
L00ED       = $00ED
L00EE       = $00EE
L00EF       = $00EF
L00F0       = $00F0
L00F1       = $00F1
L00F2       = $00F2
L00F3       = $00F3
L00F4       = $00F4
L00F5       = $00F5
L00F6       = $00F6
L00F7       = $00F7
L00F8       = $00F8
L00F9       = $00F9
L00FA       = $00FA
L00FB       = $00FB
L00FC       = $00FC
L00FD       = $00FD
L00FE       = $00FE
L00FF       = $00FF
L0400       = $0400
L0403       = $0403
L0407       = $0407
L04C0       = $04C0
L0580       = $0580
L058A       = $058A
L058C       = $058C
L0590       = $0590
L0596       = $0596
L06B3       = $06B3
L0700       = $0700
L080C       = $080C
L0810       = $0810
L0834       = $0834
L090B       = $090B
L0C00       = $0C00
L0D0C       = $0D0C
L0D23       = $0D23
L0F00       = $0F00
L0FFF       = $0FFF
L1003       = $1003
L1004       = $1004
L1005       = $1005
L1006       = $1006
L1007       = $1007
L1008       = $1008
L1010       = $1010
L106B       = $106B
L106C       = $106C
L106D       = $106D
L10C9       = $10C9
L1101       = $1101
L1200       = $1200
L130D       = $130D
L130E       = $130E
L130F       = $130F
L1310       = $1310
L132F       = $132F
L1330       = $1330
L1336       = $1336
L1338       = $1338
L133A       = $133A
L133C       = $133C
L133D       = $133D
L133E       = $133E
L133F       = $133F
L1340       = $1340
L1341       = $1341
L1342       = $1342
L1343       = $1343
L1344       = $1344
L1345       = $1345
L1346       = $1346
L1347       = $1347
L1348       = $1348
L1349       = $1349
L134A       = $134A
L134B       = $134B
L134C       = $134C
L134D       = $134D
L134E       = $134E
L134F       = $134F
L1350       = $1350
L1351       = $1351
L1352       = $1352
L1353       = $1353
L1354       = $1354
L1355       = $1355
L1414       = $1414
L1F61       = $1F61
L2000       = $2000
L2010       = $2010
L2020       = $2020
L2031       = $2031
L2040       = $2040
L2050       = $2050
L2060       = $2060
L2061       = $2061
L2070       = $2070
L2090       = $2090
L20F0       = $20F0
L2830       = $2830
L300C       = $300C
L3020       = $3020
L3030       = $3030
L3800       = $3800
L387C       = $387C
L3C00       = $3C00
L3E10       = $3E10
L3E2E       = $3E2E
L3E32       = $3E32
L3E33       = $3E33
L4000       = $4000
L4020       = $4020
L4040       = $4040
L434F       = $434F
L4520       = $4520
L4830       = $4830
L494F       = $494F
L4C0A       = $4C0A
L4D45       = $4D45
L4E49       = $4E49
L4F50       = $4F50
L5050       = $5050
L50F8       = $50F8
L5353       = $5353
L544F       = $544F
L5745       = $5745
L5E80       = $5E80
L6000       = $6000
L6026       = $6026
L6368       = $6368
L6572       = $6572
L6768       = $6768
L6974       = $6974
L6E65       = $6E65
L7020       = $7020
L7676       = $7676
L8000       = $8000
L8003       = $8003
L8040       = $8040
L8070       = $8070
L80E0       = $80E0
L80FE       = $80FE
L8282       = $8282
L8850       = $8850
L9000       = $9000
L9040       = $9040
L9050       = $9050
L9200       = $9200
L9500       = $9500
LA050       = $A050
LA060       = $A060
LA6EA       = $A6EA
LA83D       = $A83D
LA9B2       = $A9B2
LB47D       = $B47D
LB4A5       = $B4A5
LB5B0       = $B5B0
LB86F       = $B86F
LB8E8       = $B8E8
LB92A       = $B92A
LB93A       = $B93A
LB942       = $B942
LB956       = $B956
LB95E       = $B95E
LB966       = $B966
LB96F       = $B96F
LB971       = $B971
LB972       = $B972
LB997       = $B997
LB9AE       = $B9AE
LB9B2       = $B9B2
LB9CE       = $B9CE
LB9FA       = $B9FA
LBA3D       = $BA3D
LBA40       = $BA40
LBA43       = $BA43
LBA45       = $BA45
LBA46       = $BA46
LBA54       = $BA54
LBA6F       = $BA6F
LBAA9       = $BAA9
LBAAB       = $BAAB
LBADA       = $BADA
LBAE2       = $BAE2
LBB34       = $BB34
LBB3F       = $BB3F
LBC1F       = $BC1F
LBC42       = $BC42
LBC44       = $BC44
LBC51       = $BC51
LBC6F       = $BC6F
LBCB7       = $BCB7
LBCBD       = $BCBD
LBCF2       = $BCF2
LBD15       = $BD15
LBD21       = $BD21
LBD29       = $BD29
LBD37       = $BD37
LBD39       = $BD39
LBD77       = $BD77
LBD89       = $BD89
LBDA7       = $BDA7
LBDB5       = $BDB5
LBDC4       = $BDC4
LBDC6       = $BDC6
LBDE1       = $BDE1
LBDEB       = $BDEB
LBE05       = $BE05
LBE65       = $BE65
LBE73       = $BE73
LBEAD       = $BEAD
LBEB7       = $BEB7
LBECF       = $BECF
LBEFF       = $BEFF
LBF81       = $BF81
LBF85       = $BF85
LBF8A       = $BF8A
LBF94       = $BF94
LBF99       = $BF99
LBF9C       = $BF9C
LBF9F       = $BF9F
LC020       = $C020
LC040       = $C040
LD976       = $D976
LE010       = $E010
LF040       = $F040
LF0CF       = $F0CF
LF820       = $F820
LF870       = $F870
LFE10       = $FE10
LFE40       = $FE40
LFE60       = $FE60
;
; Start of code
;
            *= $A000
;
LA000:      jsr LB799
            jsr LA214
            jsr LA33D
            ldy #$08
            jsr LB1F1
            ldy #$28
            jsr LB206
            bmi LA035
            lda #$1A
            sta L009C
            ldy #$33
            lda #$DF
            ldx #$B8
            jsr LA89F
LA022:      lda CH
            cmp #$FF
            beq LA022
            ldx #$FF
            stx CH
            cmp #$1F
            bne LA04F
            jsr LA33D
LA035:      jsr LB238
            jsr LB719
            bmi LA049
            lda #$1C
            ldx #$B9
            ldy #$08
            jsr LA89F
            jmp LA05E
LA049:      jsr LB272
            jmp LA05E
LA04F:      lda #$4C
            jsr LB242
LA054:      lda #$46
            jsr LB242
            lda DVSTAT+1
            bpl LA054
LA05E:      jsr LA963
            jsr LAB35
            jsr LA12C
            lda L00CC
            beq LA05E
            jsr LA079
            bcc LA05E
            jsr LA0A3
            lda #$00
            sta L00B6
            beq LA05E
LA079:      ldy #$20
            jsr LB1F1
            and #$7F
            bit L00B3
            bmi LA0D2
            cmp #$20
            bcs LA08D
            jsr LA0F3
LA08B:      clc
            rts
LA08D:      ldx L00B6
            sta L3E2E,X
            inx
            stx L00B6
            ldy L00B5
            bpl LA0A0
            cmp #$60
            bcs LA08B
            cmp #$40
            rts
LA0A0:      cpx L00B5
            rts
LA0A3:      ldy #$00
            sty L00B6
            bvc LA0C5
            ldy L00B4
            cpy #$05
            beq LA0B6
            jsr LA120
            tya
            bne LA0B6
            rts
LA0B6:      dey
            beq LA0BC
            jsr LA7FE
LA0BC:      lda LBAE2,Y
            pha
            lda LBAE7,Y
            pha
            rts
LA0C5:      ldx L00B3
            lda LBACA,X
            beq LA0D1
            pha
            lda LBAD2,X
            pha
LA0D1:      rts
LA0D2:      asl L00B3
            lsr L00B3
            jsr LA0DB
            clc
LA0DA:      rts
LA0DB:      cmp #$5B
            bcs LA0DA
            cmp #$3D
            beq LA105
            cmp #$20
            bcs LA0EB
            adc #$20
            bcc LA0F3
LA0EB:      cmp #$32
            beq LA10B
            cmp #$40
            bcc LA0DA
LA0F3:      tax
            clc
            lda #$66
            adc LBA6F,X
            tay
            lda #$00
            sta L00B6
            adc #$A3
            pha
            tya
            pha
            rts
LA105:      ldx #$02
            lda #$00
            beq LA111
LA10B:      ror L00B5
            lda #$01
            bne LA118
LA111:      ldy L00B5
            sty L1354
            stx L00B5
LA118:      sta L00B4
            lda L00B3
            ora #$40
            bne LA129
LA120:      lda L1354
            sta L00B5
            lda L00B3
            and #$BF
LA129:      sta L00B3
LA12B:      rts
LA12C:      lda L00B9
            beq LA12B
            jmp (L134D)
            ldy L00DC
            lda L00DB
            ldx L00FF
            bpl LA14B
